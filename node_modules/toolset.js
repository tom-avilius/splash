
// all imports are mentioned below

// importing the file system module
const fs = require('fs');

// importing the os module
const os = require('os');

// ---------END OF IMPORTS------------


class Toolset {

    constructor(htmlFilePath) {

        this.htmlFilePath = htmlFilePath;
        this.username = os.userInfo().username;
        this.config = this.importConfig();
    }


    importConfig() {

        try {

            fs.mkdirSync('/home/' +this.username +'/Documents/splash');
        } catch(err) {

            console.log('splash directory already exists..');
        }

        try {

            const configBuffer = fs.readFileSync('/home/' +this.username +'/Documents/splash/config.json');
            const config = JSON.parse(configBuffer);
            return config;
        } catch (err) {

            try {

                fs.writeFileSync('/home/' +this.username +'/Documents/splash/config.json', '{"htmlFile": ' +'"' +this.htmlFilePath +'"' +', "openDevTools": ' +false +'}')
                const configBuffer = fs.readFileSync('/home/' +this.username +'/Documents/splash/config.json');
                const config = JSON.parse(configBuffer);
                return config;
            } catch (Err) {
                console.trace(Err);
            }
         }
    }
}


module.exports = {Toolset};